{"version":3,"sources":["flowy.js","demo.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["flowy","canvas","grab","release","snapping","spacingX","spacingY","$","document","ready","blocks","blockstemp","canvasDiv","active","paddingx","paddingy","offsetleft","offsetleftold","rearrange","lastevent","drag","dragx","dragy","original","mouseX","mouseY","append","import","output","html","JSON","parse","blockarr","htmlSer","stringify","jsonData","length","i","push","id","parent","data","children","each","jsonName","attr","jsonValue","val","name","value","deleteBlocks","on","event","targetTouches","changedTouches","clientX","clientY","which","clone","addClass","removeClass","appendTo","Math","max","apply","map","a","parseInt","blockGrabbed","offset","left","top","css","blockReleased","hasClass","w","scrollLeft","scrollTop","x","innerWidth","y","innerHeight","filter","merge","blockSnap","undefined","childwidth","width","height","remove","xpos","ypos","blocko","snap","totalwidth","totalremove","maxheight","arrowhelp","arrowx","arrowy","after","flag","idval","zwidth","rearrangeMe","checkOffset","handler","type","blockid","grep","e","layer","foundids","allids","includes","blocknumber","fixOffset","off","widths","mathmin","item","index","min","result","z","block","first","images","pngs","svgs","templates","blocklist","grabme","eye","action","time","error","eyeblue","more","actionblue","timeblue","errorblue","databaseorange","actionorange","twitterorange","logred","errorred","blocklists","triggers","actions","database","twitter","loggers","log","rightcard","tempblock","tempblock2","click","setTimeout","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"demo.d3b53871.js","sourceRoot":"../src","sourcesContent":["/* global $ */\n\nconst flowy = function (canvas, grab, release, snapping, spacingX, spacingY) {\n  if (!grab) {\n    grab = function () {}\n  }\n  if (!release) {\n    release = function () {}\n  }\n  if (!snapping) {\n    snapping = function () {\n      return true\n    }\n  }\n  if (!spacingX) {\n    spacingX = 20\n  }\n  if (!spacingY) {\n    spacingY = 80\n  }\n  $(document).ready(function () {\n    var blocks = []\n    var blockstemp = []\n    var canvasDiv = canvas\n    var active = false\n    var paddingx = spacingX\n    var paddingy = spacingY\n    var offsetleft = 0\n    var offsetleftold = 0\n    var rearrange = false\n    var lastevent = false\n    var drag, dragx, dragy, original\n    var mouseX, mouseY\n    canvasDiv.append(\"<div class='indicator invisible'></div>\")\n    flowy.import = function (output) {\n      canvasDiv.html(JSON.parse(output.html))\n      blocks = output.blockarr\n    }\n    flowy.output = function () {\n      var htmlSer = JSON.stringify(canvasDiv.html())\n      var jsonData = { html: htmlSer, blockarr: blocks, blocks: [] }\n      if (blocks.length > 0) {\n        for (var i = 0; i < blocks.length; i++) {\n          jsonData.blocks.push({\n            id: blocks[i].id,\n            parent: blocks[i].parent,\n            data: []\n          })\n          $('.blockid[value=' + blocks[i].id + ']').parent().children('input').each(function () {\n            var jsonName = $(this).attr('name')\n            var jsonValue = $(this).val()\n            jsonData.blocks[i].data.push({\n              name: jsonName,\n              value: jsonValue\n            })\n          })\n        }\n        return jsonData\n      }\n    }\n    flowy.deleteBlocks = function () {\n      blocks = []\n      canvasDiv.html(\"<div class='indicator invisible'></div>\")\n    }\n    $(document).on('mousedown touchstart', '.create-flowy', function (event) {\n      if (event.targetTouches) {\n        mouseX = event.changedTouches[0].clientX\n        mouseY = event.changedTouches[0].clientY\n      } else {\n        mouseX = event.clientX\n        mouseY = event.clientY\n      }\n      if (event.which !== 3) {\n        original = $(this)\n        if (blocks.length === 0) {\n          $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + blocks.length + \"'>\").removeClass('create-flowy').appendTo('body')\n          $(this).addClass('dragnow')\n          drag = $('.blockid[value=' + blocks.length + ']').parent()\n        } else {\n          $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + (Math.max.apply(Math, blocks.map(a => a.id)) + 1) + \"'>\").removeClass('create-flowy').appendTo('body')\n          $(this).addClass('dragnow')\n          drag = $('.blockid[value=' + (parseInt(Math.max.apply(Math, blocks.map(a => a.id))) + 1) + ']').parent()\n        }\n        blockGrabbed($(this))\n        drag.addClass('dragging')\n        active = true\n        dragx = mouseX - $(this).offset().left\n        dragy = mouseY - $(this).offset().top\n        drag.css('left', mouseX - dragx + 'px')\n        drag.css('top', mouseY - dragy + 'px')\n      }\n    })\n    $(document).on('mouseup touchend', function (event) {\n      if (event.which !== 3 && (active || rearrange)) {\n        blockReleased()\n        if (!$('.indicator').hasClass('invisible')) {\n          $('.indicator').addClass('invisible')\n        }\n        if (active) {\n          original.removeClass('dragnow')\n          drag.removeClass('dragging')\n        }\n        if (parseInt(drag.children('.blockid').val()) === 0 && rearrange) {\n          drag.removeClass('dragging')\n          rearrange = false\n          for (var w = 0; w < blockstemp.length; w++) {\n            if (blockstemp[w].id !== parseInt(drag.children('.blockid').val())) {\n              $('.blockid[value=' + blockstemp[w].id + ']').parent().css('left', $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().left - canvasDiv.offset().left + canvasDiv.scrollLeft())\n              $('.blockid[value=' + blockstemp[w].id + ']').parent().css('top', $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().top - canvasDiv.offset().top + canvasDiv.scrollTop())\n              $('.arrowid[value=' + blockstemp[w].id + ']').parent().css('left', $('.arrowid[value=' + blockstemp[w].id + ']').parent().offset().left - canvasDiv.offset().left + canvasDiv.scrollLeft())\n              $('.arrowid[value=' + blockstemp[w].id + ']').parent().css('top', $('.arrowid[value=' + blockstemp[w].id + ']').parent().offset().top - canvasDiv.offset().top + canvasDiv.scrollTop() + 'px')\n              $('.blockid[value=' + blockstemp[w].id + ']').parent().appendTo(canvasDiv)\n              $('.arrowid[value=' + blockstemp[w].id + ']').parent().appendTo(canvasDiv)\n\n              blockstemp[w].x = $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().left + ($('.blockid[value=' + blockstemp[w].id + ']').innerWidth() / 2) + canvasDiv.scrollLeft()\n              blockstemp[w].y = $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().top + ($('.blockid[value=' + blockstemp[w].id + ']').parent().innerHeight() / 2) + canvasDiv.scrollTop()\n            }\n          }\n          blockstemp.filter(a => a.id === 0)[0].x = drag.offset().left + (drag.innerWidth() / 2)\n          blockstemp.filter(a => a.id === 0)[0].y = drag.offset().top + (drag.innerHeight() / 2)\n          blocks = $.merge(blocks, blockstemp)\n          blockstemp = []\n        } else if (active && blocks.length === 0 && drag.offset().top > canvasDiv.offset().top && drag.offset().left > canvasDiv.offset().left) {\n          blockSnap(drag, true, undefined)\n          active = false\n          drag.css('top', drag.offset().top - canvasDiv.offset().top + canvasDiv.scrollTop() + 'px')\n          drag.css('left', drag.offset().left - canvasDiv.offset().left + canvasDiv.scrollLeft() + 'px')\n          drag.appendTo(canvasDiv)\n          blocks.push({\n            parent: -1,\n            childwidth: 0,\n            id: parseInt(drag.children('.blockid').val()),\n            x: drag.offset().left + (drag.innerWidth() / 2) + canvasDiv.scrollLeft(),\n            y: drag.offset().top + (drag.innerHeight() / 2) + canvasDiv.scrollTop(),\n            width: drag.innerWidth(),\n            height: drag.innerHeight()\n          })\n        } else if (active && blocks.length === 0) {\n          drag.remove()\n        } else if (active || rearrange) {\n          var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvasDiv.scrollLeft()\n          var ypos = drag.offset().top + canvasDiv.scrollTop()\n          var blocko = blocks.map(a => a.id)\n          for (var i = 0; i < blocks.length; i++) {\n            if (xpos >= blocks.filter(a => a.id === blocko[i])[0].x - (blocks.filter(a => a.id === blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id === blocko[i])[0].x + (blocks.filter(a => a.id === blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id === blocko[i])[0].y - (blocks.filter(a => a.id === blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id === blocko[i])[0].y + blocks.filter(a => a.id === blocko[i])[0].height) {\n              active = false\n              if (!rearrange && blockSnap(drag, false, blocks.filter(id => id.id === blocko[i])[0])) {\n                snap(drag, i, blocko)\n              } else if (rearrange) {\n                snap(drag, i, blocko)\n              }\n              break\n            } else if (i === blocks.length - 1) {\n              if (rearrange) {\n                rearrange = false\n                blockstemp = []\n              }\n              active = false\n              drag.remove()\n            }\n          }\n        }\n      }\n    })\n    function snap (drag, i, blocko) {\n      if (!rearrange) {\n        drag.appendTo(canvasDiv)\n      }\n      var totalwidth = 0\n      var totalremove = 0\n      var maxheight = 0\n      for (var w = 0; w < blocks.filter(id => id.parent === blocko[i]).length; w++) {\n        var children = blocks.filter(id => id.parent === blocko[i])[w]\n        if (children.childwidth > children.width) {\n          totalwidth += children.childwidth + paddingx\n        } else {\n          totalwidth += children.width + paddingx\n        }\n      }\n      totalwidth += drag.innerWidth()\n      for (var w = 0; w < blocks.filter(id => id.parent === blocko[i]).length; w++) {\n        var children = blocks.filter(id => id.parent === blocko[i])[w]\n        if (children.childwidth > children.width) {\n          $('.blockid[value=' + children.id + ']').parent().css('left', blocks.filter(a => a.id === blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) + 'px')\n          children.x = blocks.filter(id => id.parent === blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2)\n          totalremove += children.childwidth + paddingx\n        } else {\n          $('.blockid[value=' + children.id + ']').parent().css('left', blocks.filter(a => a.id === blocko[i])[0].x - (totalwidth / 2) + totalremove + 'px')\n          children.x = blocks.filter(id => id.parent === blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.width / 2)\n          totalremove += children.width + paddingx\n        }\n      }\n      drag.css('left', blocks.filter(id => id.id === blocko[i])[0].x - (totalwidth / 2) + totalremove - canvasDiv.offset().left + canvasDiv.scrollLeft() + 'px')\n      drag.css('top', blocks.filter(id => id.id === blocko[i])[0].y + (blocks.filter(id => id.id === blocko[i])[0].height / 2) + paddingy - canvasDiv.offset().top + 'px')\n      if (rearrange) {\n        blockstemp.filter(a => a.id === parseInt(drag.children('.blockid').val()))[0].x = drag.offset().left + (drag.innerWidth() / 2) + canvasDiv.scrollLeft() + canvasDiv.scrollLeft()\n        blockstemp.filter(a => a.id === parseInt(drag.children('.blockid').val()))[0].y = drag.offset().top + (drag.innerHeight() / 2) + canvasDiv.scrollTop()\n        blockstemp.filter(a => a.id === drag.children('.blockid').val())[0].parent = blocko[i]\n        for (var w = 0; w < blockstemp.length; w++) {\n          if (blockstemp[w].id !== parseInt(drag.children('.blockid').val())) {\n            $('.blockid[value=' + blockstemp[w].id + ']').parent().css('left', $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().left - canvasDiv.offset().left + canvasDiv.scrollLeft())\n            $('.blockid[value=' + blockstemp[w].id + ']').parent().css('top', $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().top - canvasDiv.offset().top + canvasDiv.scrollTop())\n            $('.arrowid[value=' + blockstemp[w].id + ']').parent().css('left', $('.arrowid[value=' + blockstemp[w].id + ']').parent().offset().left - canvasDiv.offset().left + canvasDiv.scrollLeft() + 20)\n            $('.arrowid[value=' + blockstemp[w].id + ']').parent().css('top', $('.arrowid[value=' + blockstemp[w].id + ']').parent().offset().top - canvasDiv.offset().top + canvasDiv.scrollTop())\n            $('.blockid[value=' + blockstemp[w].id + ']').parent().appendTo(canvasDiv)\n            $('.arrowid[value=' + blockstemp[w].id + ']').parent().appendTo(canvasDiv)\n\n            blockstemp[w].x = $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().left + ($('.blockid[value=' + blockstemp[w].id + ']').innerWidth() / 2) + canvasDiv.scrollLeft()\n            blockstemp[w].y = $('.blockid[value=' + blockstemp[w].id + ']').parent().offset().top + ($('.blockid[value=' + blockstemp[w].id + ']').parent().innerHeight() / 2) + canvasDiv.scrollTop()\n          }\n        }\n        blocks = $.merge(blocks, blockstemp)\n        blockstemp = []\n      } else {\n        blocks.push({\n          childwidth: 0,\n          parent: blocko[i],\n          id: parseInt(drag.children('.blockid').val()),\n          x: drag.offset().left + (drag.innerWidth() / 2) + canvasDiv.scrollLeft(),\n          y: drag.offset().top + (drag.innerHeight() / 2) + canvasDiv.scrollTop(),\n          width: drag.innerWidth(),\n          height: drag.innerHeight()\n        })\n      }\n      var arrowhelp = blocks.filter(a => a.id === parseInt(drag.children('.blockid').val()))[0]\n      var arrowx = arrowhelp.x - blocks.filter(a => a.id === blocko[i])[0].x + 20\n      var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(id => id.parent === blocko[i])[0].y + (blocks.filter(id => id.parent === blocko[i])[0].height / 2)) + canvasDiv.scrollTop()\n      if (arrowx < 0) {\n        drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children('.blockid').val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(a => a.id === blocko[i])[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(a => a.id === blocko[i])[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>')\n        $('.arrowid[value=' + drag.children('.blockid').val() + ']').parent().css('left', (arrowhelp.x - 5) - canvasDiv.offset().left + canvasDiv.scrollLeft() + 'px')\n      } else {\n        drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children('.blockid').val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>')\n        $('.arrowid[value=' + parseInt(drag.children('.blockid').val()) + ']').parent().css('left', blocks.filter(a => a.id === blocko[i])[0].x - 20 - canvasDiv.offset().left + canvasDiv.scrollLeft() + 'px')\n      }\n      $('.arrowid[value=' + parseInt(drag.children('.blockid').val()) + ']').parent().css('top', blocks.filter(a => a.id === blocko[i])[0].y + (blocks.filter(a => a.id === blocko[i])[0].height / 2) + 'px')\n      if (blocks.filter(a => a.id === blocko[i])[0].parent !== -1) {\n        var flag = false\n        var idval = blocko[i]\n        while (!flag) {\n          if (blocks.filter(a => a.id === idval)[0].parent === -1) {\n            flag = true\n          } else {\n            var zwidth = 0\n            for (var w = 0; w < blocks.filter(id => id.parent === idval).length; w++) {\n              var children = blocks.filter(id => id.parent === idval)[w]\n              if (children.childwidth > children.width) {\n                if (w === blocks.filter(id => id.parent === idval).length - 1) {\n                  zwidth += children.childwidth\n                } else {\n                  zwidth += children.childwidth + paddingx\n                }\n              } else {\n                if (w === blocks.filter(id => id.parent === idval).length - 1) {\n                  zwidth += children.width\n                } else {\n                  zwidth += children.width + paddingx\n                }\n              }\n            }\n            blocks.filter(a => a.id === idval)[0].childwidth = zwidth\n            idval = blocks.filter(a => a.id === idval)[0].parent\n          }\n        }\n        blocks.filter(id => id.id === idval)[0].childwidth = totalwidth\n      }\n      if (rearrange) {\n        rearrange = false\n        drag.removeClass('dragging')\n      }\n      rearrangeMe()\n      checkOffset()\n    }\n    $(document).on('mousedown touchstart', '.block', function (event) {\n      $(document).on('mouseup mousemove touchmove', '.block', function handler (event) {\n        if (event.targetTouches[0]) {\n          mouseX = event.targetTouches[0].clientX\n          mouseY = event.targetTouches[0].clientY\n        } else {\n          mouseX = event.clientX\n          mouseY = event.clientY\n        }\n        if (event.type !== 'mouseup') {\n          if (event.which !== 3) {\n            if (!active && !rearrange) {\n              rearrange = true\n              drag = $(this)\n              drag.addClass('dragging')\n              dragx = mouseX - $(this).offset().left\n              dragy = mouseY - $(this).offset().top\n              var blockid = parseInt($(this).children('.blockid').val())\n              drag = $(this)\n              blockstemp.push(blocks.filter(a => a.id === blockid)[0])\n              blocks = $.grep(blocks, function (e) {\n                return e.id !== blockid\n              })\n              $('.arrowid[value=' + blockid + ']').parent().remove()\n              var layer = blocks.filter(a => a.parent === blockid)\n              var flag = false\n              var foundids = []\n              var allids = []\n              while (!flag) {\n                for (var i = 0; i < layer.length; i++) {\n                  blockstemp.push(blocks.filter(a => a.id === layer[i].id)[0])\n                  $('.blockid[value=' + layer[i].id + ']').parent().css('left', $('.blockid[value=' + layer[i].id + ']').parent().offset().left - drag.offset().left)\n                  $('.blockid[value=' + layer[i].id + ']').parent().css('top', $('.blockid[value=' + layer[i].id + ']').parent().offset().top - drag.offset().top)\n                  $('.arrowid[value=' + layer[i].id + ']').parent().css('left', $('.arrowid[value=' + layer[i].id + ']').parent().offset().left - drag.offset().left)\n                  $('.arrowid[value=' + layer[i].id + ']').parent().css('top', $('.arrowid[value=' + layer[i].id + ']').parent().offset().top - drag.offset().top)\n                  $('.blockid[value=' + layer[i].id + ']').parent().appendTo(drag)\n                  $('.arrowid[value=' + layer[i].id + ']').parent().appendTo(drag)\n                  foundids.push(layer[i].id)\n                  allids.push(layer[i].id)\n                }\n                if (foundids.length === 0) {\n                  flag = true\n                } else {\n                  layer = blocks.filter(a => foundids.includes(a.parent))\n                  foundids = []\n                }\n              }\n              for (var i = 0; i < blocks.filter(a => a.parent === blockid).length; i++) {\n                var blocknumber = blocks.filter(a => a.parent === blockid)[i]\n                blocks = $.grep(blocks, function (e) {\n                  return e.id !== blocknumber\n                })\n              }\n              for (var i = 0; i < allids.length; i++) {\n                var blocknumber = allids[i]\n                blocks = $.grep(blocks, function (e) {\n                  return e.id !== blocknumber\n                })\n              }\n              if (blocks.length > 1) {\n                rearrangeMe()\n              }\n              if (lastevent) {\n                fixOffset()\n              }\n            }\n          }\n        }\n        $(document).off('mouseup mousemove touchmove', handler)\n      })\n    })\n    $(document).on('mousemove touchmove', function (event) {\n      if (event.targetTouches) {\n        mouseX = event.targetTouches[0].clientX\n        mouseY = event.targetTouches[0].clientY\n      } else {\n        mouseX = event.clientX\n        mouseY = event.clientY\n      }\n      if (active) {\n        drag.css('left', mouseX - dragx + 'px')\n        drag.css('top', mouseY - dragy + 'px')\n      } else if (rearrange) {\n        drag.css('left', mouseX - dragx - canvasDiv.offset().left + canvasDiv.scrollLeft() + 'px')\n        drag.css('top', mouseY - dragy - canvasDiv.offset().top + canvasDiv.scrollTop() + 'px')\n        blockstemp.filter(a => a.id === parseInt(drag.children('.blockid').val())).x = drag.offset().left + (drag.innerWidth() / 2) + canvasDiv.scrollLeft()\n        blockstemp.filter(a => a.id === parseInt(drag.children('.blockid').val())).y = drag.offset().left + (drag.innerHeight() / 2) + canvasDiv.scrollTop()\n      }\n      if (active || rearrange) {\n        var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvasDiv.scrollLeft()\n        var ypos = drag.offset().top + canvasDiv.scrollTop()\n        var blocko = blocks.map(a => a.id)\n        for (var i = 0; i < blocks.length; i++) {\n          if (xpos >= blocks.filter(a => a.id === blocko[i])[0].x - (blocks.filter(a => a.id === blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id === blocko[i])[0].x + (blocks.filter(a => a.id === blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id === blocko[i])[0].y - (blocks.filter(a => a.id === blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id === blocko[i])[0].y + blocks.filter(a => a.id === blocko[i])[0].height) {\n            $('.indicator').appendTo($('.blockid[value=' + blocko[i] + ']').parent())\n            $('.indicator').css('left', ($('.blockid[value=' + blocko[i] + ']').parent().innerWidth() / 2) - 5 + 'px')\n            $('.indicator').css('top', $('.blockid[value=' + blocko[i] + ']').parent().innerHeight() + 'px')\n            $('.indicator').removeClass('invisible')\n            break\n          } else if (i === blocks.length - 1) {\n            if (!$('.indicator').hasClass('invisible')) {\n              $('.indicator').addClass('invisible')\n            }\n          }\n        }\n      }\n    })\n\n    function checkOffset () {\n      offsetleft = blocks.map(a => a.x)\n      var widths = blocks.map(a => a.width)\n      var mathmin = offsetleft.map(function (item, index) {\n        return item - (widths[index] / 2)\n      })\n      offsetleft = Math.min.apply(Math, mathmin)\n      if (offsetleft < canvasDiv.offset().left) {\n        lastevent = true\n        var blocko = blocks.map(a => a.id)\n        for (var w = 0; w < blocks.length; w++) {\n          $('.blockid[value=' + blocks.filter(a => a.id === blocko[w])[0].id + ']').parent().css('left', blocks.filter(a => a.id === blocko[w])[0].x - (blocks.filter(a => a.id === blocko[w])[0].width / 2) - offsetleft + 20)\n          if (blocks.filter(a => a.id === blocko[w])[0].parent !== -1) {\n            var arrowhelp = blocks.filter(a => a.id === blocko[w])[0]\n            var arrowx = arrowhelp.x - blocks.filter(a => a.id === blocks.filter(a => a.id === blocko[w])[0].parent)[0].x\n            if (arrowx < 0) {\n              $('.arrowid[value=' + blocko[w] + ']').parent().css('left', (arrowhelp.x - offsetleft + 20 - 5) + 'px')\n            } else {\n              $('.arrowid[value=' + blocko[w] + ']').parent().css('left', blocks.filter(id => id.id === blocks.filter(a => a.id === blocko[w])[0].parent)[0].x - 20 - offsetleft + 20 + 'px')\n            }\n          }\n        }\n        for (var w = 0; w < blocks.length; w++) {\n          blocks[w].x = $('.blockid[value=' + blocks[w].id + ']').parent().offset().left + canvasDiv.offset().left - ($('.blockid[value=' + blocks[w].id + ']').parent().innerWidth() / 2) - 40\n        }\n        offsetleftold = offsetleft\n      }\n    }\n\n    function fixOffset () {\n      if (offsetleftold < canvasDiv.offset().left) {\n        lastevent = false\n        var blocko = blocks.map(a => a.id)\n        for (var w = 0; w < blocks.length; w++) {\n          $('.blockid[value=' + blocks.filter(a => a.id === blocko[w])[0].id + ']').parent().css('left', blocks.filter(a => a.id === blocko[w])[0].x - (blocks.filter(a => a.id === blocko[w])[0].width / 2) - offsetleftold - 20)\n          blocks.filter(a => a.id === blocko[w])[0].x = $('.blockid[value=' + blocks.filter(a => a.id === blocko[w])[0].id + ']').parent().offset().left + (blocks.filter(a => a.id === blocko[w])[0].width / 2)\n\n          if (blocks.filter(a => a.id === blocko[w])[0].parent !== -1) {\n            var arrowhelp = blocks.filter(a => a.id === blocko[w])[0]\n            var arrowx = arrowhelp.x - blocks.filter(a => a.id === blocks.filter(a => a.id === blocko[w])[0].parent)[0].x\n            if (arrowx < 0) {\n              $('.arrowid[value=' + blocko[w] + ']').parent().css('left', (arrowhelp.x - 5 - canvasDiv.offset().left) + 'px')\n            } else {\n              $('.arrowid[value=' + blocko[w] + ']').parent().css('left', blocks.filter(id => id.id === blocks.filter(a => a.id === blocko[w])[0].parent)[0].x - 20 - canvasDiv.offset().left + 'px')\n            }\n          }\n        }\n        for (var w = 0; w < blocks.length; w++) {\n          // blocks[w].x = blocks[w].x+offsetleftold-20;\n        }\n        offsetleftold = 0\n      }\n    }\n\n    function rearrangeMe () {\n      var result = blocks.map(a => a.parent)\n      for (var z = 0; z < result.length; z++) {\n        if (result[z] === -1) {\n          z++\n        }\n        var totalwidth = 0\n        var totalremove = 0\n        var maxheight = 0\n        for (var w = 0; w < blocks.filter(id => id.parent === result[z]).length; w++) {\n          var children = blocks.filter(id => id.parent === result[z])[w]\n          if (blocks.filter(id => id.parent === children.id).length === 0) {\n            children.childwidth = 0\n          }\n          if (children.childwidth > children.width) {\n            if (w === blocks.filter(id => id.parent === result[z]).length - 1) {\n              totalwidth += children.childwidth\n            } else {\n              totalwidth += children.childwidth + paddingx\n            }\n          } else {\n            if (w === blocks.filter(id => id.parent === result[z]).length - 1) {\n              totalwidth += children.width\n            } else {\n              totalwidth += children.width + paddingx\n            }\n          }\n        }\n        if (result[z] !== -1) {\n          blocks.filter(a => a.id === result[z])[0].childwidth = totalwidth\n        }\n        for (var w = 0; w < blocks.filter(id => id.parent === result[z]).length; w++) {\n          var children = blocks.filter(id => id.parent === result[z])[w]\n          $('.blockid[value=' + children.id + ']').parent().css('top', blocks.filter(id => id.id === result[z]).y + paddingy + 'px')\n          blocks.filter(id => id.id === result[z]).y = blocks.filter(id => id.id === result[z]).y + paddingy\n          if (children.childwidth > children.width) {\n            $('.blockid[value=' + children.id + ']').parent().css('left', blocks.filter(id => id.id === result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) - canvasDiv.offset().left + 'px')\n            children.x = blocks.filter(id => id.id === result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2)\n            totalremove += children.childwidth + paddingx\n          } else {\n            $('.blockid[value=' + children.id + ']').parent().css('left', blocks.filter(id => id.id === result[z])[0].x - (totalwidth / 2) + totalremove - canvasDiv.offset().left + 'px')\n            children.x = blocks.filter(id => id.id === result[z])[0].x - (totalwidth / 2) + totalremove + (children.width / 2)\n            totalremove += children.width + paddingx\n          }\n          var arrowhelp = blocks.filter(a => a.id === children.id)[0]\n          var arrowx = arrowhelp.x - blocks.filter(a => a.id === children.parent)[0].x + 20\n          var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(a => a.id === children.parent)[0].y + (blocks.filter(a => a.id === children.parent)[0].height / 2))\n          $('.arrowid[value=' + children.id + ']').parent().css('top', blocks.filter(id => id.id === children.parent)[0].y + (blocks.filter(id => id.id === children.parent)[0].height / 2) - canvasDiv.offset().top + 'px')\n          if (arrowx < 0) {\n            $('.arrowid[value=' + children.id + ']').parent().css('left', (arrowhelp.x - 5) - canvasDiv.offset().left + 'px')\n            $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(id => id.id === children.parent)[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(id => id.id === children.parent)[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>')\n          } else {\n            $('.arrowid[value=' + children.id + ']').parent().css('left', blocks.filter(id => id.id === children.parent)[0].x - 20 - canvasDiv.offset().left + 'px')\n            $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>')\n          }\n        }\n      }\n    }\n  })\n\n  function blockGrabbed (block) {\n    grab(block)\n  }\n\n  function blockReleased () {\n    release()\n  }\n\n  function blockSnap (drag, first, parent) {\n    return snapping(drag, first, parent)\n  }\n}\n\nexport default flowy\n","/* global $ */\n\nimport flowy from './flowy'\nimport './demo.css'\nimport './flowy.css'\n\n// this just sets up path-conversion for parcel\nimport pngs from './assets/*.png'\nimport svgs from './assets/*.svg'\nconst images = { ...pngs, ...svgs }\n\n// all HTML templates go here\nconst templates = {}\ntemplates.blocklist = `\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"1\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.eye}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">New visitor</p>\n      <p class=\"blockdesc\">Triggers when somebody visits a specified page</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"2\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.action}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Action is performed</p>\n      <p class=\"blockdesc\">Triggers when somebody performs a specified action</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"3\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.time}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Time has passed</p>\n      <p class=\"blockdesc\">Triggers after a specified amount of time</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"4\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.error}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Error prompt</p>\n      <p class=\"blockdesc\">Triggers when a specified error happens</p>\n    </div>\n  </div>\n</div>\n`\n\ntemplates.blocks = [\n  `<div class=\"blockyleft\">\n    <img src=\"${images.eyeblue}\">\n    <p class=\"blockyname\">New visitor</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">When a <span>new visitor</span> goes to <span>Site 1</span></div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.actionblue}\">\n    <p class=\"blockyname\">Action is performed</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">When <span>Action 1</span> is performed</div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.timeblue}\">\n    <p class=\"blockyname\">Time has passed</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">When <span>10 seconds</span> have passed</div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.errorblue}\">\n    <p class=\"blockyname\">Error prompt</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">When <span>Error 1</span> is triggered</div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.databaseorange}\">\n    <p class=\"blockyname\">New database entry</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Add <span>Data object</span> to <span>Database 1</span></div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.databaseorange}\">\n    <p class=\"blockyname\">Update database</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Update <span>Database 1</span></div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.actionorange}\">\n    <p class=\"blockyname\">Perform an action</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Perform <span>Action 1</span></div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.twitterorange}\">\n    <p class=\"blockyname\">Make a tweet</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Tweet <span>Query 1</span> with the account <span>@alyssaxuu</span></div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.logred}\">\n    <p class=\"blockyname\">Add new log entry</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Add new <span>success</span> log entry</div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.logred}\">\n    <p class=\"blockyname\">Update logs</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Edit <span>Log Entry 1</span></div>`,\n\n  `<div class=\"blockyleft\">\n    <img src=\"${images.errorred}\">\n    <p class=\"blockyname\">Prompt an error</p>\n  </div>\n  <div class=\"blockyright\"><img src=\"${images.more}\"></div>\n  <div class=\"blockydiv\"></div>\n  <div class=\"blockyinfo\">Trigger <span>Error 1</span></div>`\n]\n\ntemplates.blocklists = {\n  triggers: `<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"1\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.eye}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">New visitor</p>\n      <p class=\"blockdesc\">Triggers when somebody visits a specified page</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"2\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.action}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Action is performed</p>\n      <p class=\"blockdesc\">Triggers when somebody performs a specified action</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"3\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.time}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Time has passed</p>\n      <p class=\"blockdesc\">Triggers after a specified amount of time</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"4\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.error}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Error prompt</p>\n      <p class=\"blockdesc\">Triggers when a specified error happens</p>\n    </div>\n  </div>\n</div>`,\n\n  actions: `<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"5\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.database}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">New database entry</p>\n      <p class=\"blockdesc\">Adds a new entry to a specified database</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"6\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.database}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Update database</p>\n      <p class=\"blockdesc\">Edits and deletes database entries and properties</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"7\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.action}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Perform an action</p>\n      <p class=\"blockdesc\">Performs or edits a specified action</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"8\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.twitter}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Make a tweet</p>\n      <p class=\"blockdesc\">Makes a tweet with a specified query</p>\n    </div>\n  </div>\n</div>`,\n\n  loggers: `<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"9\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.log}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Add new log entry</p>\n      <p class=\"blockdesc\">Adds a new log entry to this project</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"10\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.log}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Update logs</p>\n      <p class=\"blockdesc\">Edits and deletes log entries in this project</p>\n    </div>\n  </div>\n</div>\n<div class=\"blockelem create-flowy noselect\">\n  <input type=\"hidden\" name=\"blockelemtype\" class=\"blockelemtype\" value=\"11\">\n  <div class=\"grabme\"><img src=\"${images.grabme}\"></div>\n  <div class=\"blockin\">\n    <div class=\"blockico\"><span></span><img src=\"${images.error}\"></div>\n    <div class=\"blocktext\">\n      <p class=\"blocktitle\">Prompt an error</p>\n      <p class=\"blockdesc\">Triggers a specified error</p>\n    </div>\n  </div>\n</div>`\n}\n\n$(document).ready(function () {\n  var rightcard = false\n  var tempblock\n  var tempblock2\n  $('#blocklist').html(templates.blocklist)\n  flowy($('#canvas'), drag, release, snapping)\n  function snapping (drag, first) {\n    drag.children('.grabme').remove()\n    drag.children('.blockin').remove()\n    drag.append(templates.blocks[parseInt(drag.children('.blockelemtype').val()) - 1])\n  }\n  function drag (block) {\n    block.addClass('blockdisabled')\n    tempblock2 = block\n  }\n  function release () {\n    tempblock2.removeClass('blockdisabled')\n  }\n  $(document).on('click', '.navdisabled', function () {\n    $('.navactive').addClass('navdisabled')\n    $('.navactive').removeClass('navactive')\n    $(this).addClass('navactive')\n    $(this).removeClass('navdisabled')\n    $('#blocklist').html(templates.blocklists[$(this).attr('id')])\n  })\n  $('#close').click(function () {\n    if (rightcard) {\n      rightcard = false\n      $('#properties').removeClass('expanded')\n      setTimeout(function () {\n        $('#propwrap').removeClass('itson')\n      }, 300)\n      tempblock.removeClass('selectedblock')\n    }\n  })\n  $('#removeblock').on('click', function () {\n    flowy.deleteBlocks()\n  })\n  $(document).on('mousedown', '.block', function (event) {\n    $(document).on('mouseup mousemove', '.block', function handler (event) {\n      if (event.type === 'mouseup') {\n        if (!rightcard) {\n          tempblock = $(this)\n          rightcard = true\n          $('#properties').addClass('expanded')\n          $('#propwrap').addClass('itson')\n          tempblock.addClass('selectedblock')\n        }\n      }\n      $(document).off('mouseup mousemove', handler)\n    })\n  })\n})\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}